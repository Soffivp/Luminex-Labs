# Configuración de SonarQube para Bolsa de Empleados
# =====================================================

# Información del proyecto
sonar.projectKey=bolsa-empleados
sonar.projectName=Bolsa de Empleados - CAIL
sonar.projectVersion=2.1.0

# Rutas de código fuente
sonar.sources=backend/services,backend/shared
sonar.tests=backend/services/**/tests,backend/services/**/__tests__

# Exclusiones (archivos que no se deben analizar)
sonar.exclusions=\
  **/node_modules/**,\
  **/coverage/**,\
  **/dist/**,\
  **/build/**,\
  **/*.test.js,\
  **/*.spec.js,\
  **/*.config.js,\
  **/nginx/**,\
  **/scripts/**,\
  **/*.backup,\
  **/.env*,\
  **/serviceAccountKey*.json,\
  **/firebase-*.json

# Cobertura de tests (cuando se implemente)
sonar.javascript.lcov.reportPaths=coverage/lcov.info
sonar.coverage.exclusions=\
  **/*.test.js,\
  **/*.spec.js,\
  **/tests/**,\
  **/__tests__/**

# Codificación
sonar.sourceEncoding=UTF-8

# Lenguaje
sonar.language=js

# Configuración de JavaScript/Node.js
sonar.javascript.node.maxspace=4096

# Umbrales de calidad
sonar.qualitygate.wait=true

# Duplicación de código (permitir hasta 12%)
sonar.cpd.exclusions=\
  **/index.js

# Security hotspots - marcar como revisados
sonar.security.hotspots.excluded=false

# Reglas personalizadas
# Deshabilitar algunas reglas que pueden ser false positives

# S1192: Duplicated string literals - Permitir en configuración
sonar.issue.ignore.multicriteria=e1,e2,e3

# Permitir process.exit() solo en graceful shutdown con comentario eslint-disable
sonar.issue.ignore.multicriteria.e1.ruleKey=javascript:S1147
sonar.issue.ignore.multicriteria.e1.resourceKey=**/service-setup/index.js

# Permitir console en logger wrapper
sonar.issue.ignore.multicriteria.e2.ruleKey=javascript:S2228
sonar.issue.ignore.multicriteria.e2.resourceKey=**/shared/firebase/index.js

# Permitir CORS dinámico
sonar.issue.ignore.multicriteria.e3.ruleKey=javascript:S5122
sonar.issue.ignore.multicriteria.e3.resourceKey=**/service-setup/index.js

# Complejidad ciclomática máxima
sonar.javascript.complexity.maximum=15

# Complejidad cognitiva máxima
sonar.javascript.cognitive.complexity.threshold=15

# Tamaño máximo de archivo
sonar.javascript.file.suffixes=.js,.jsx

# Links del proyecto
sonar.links.homepage=https://github.com/JhandrySolorzano/bolsa-empleados
sonar.links.ci=https://github.com/JhandrySolorzano/bolsa-empleados/actions
sonar.links.issue=https://github.com/JhandrySolorzano/bolsa-empleados/issues
sonar.links.scm=https://github.com/JhandrySolorzano/bolsa-empleados

# Organización (si usas SonarCloud)
# sonar.organization=tu-organizacion

# Token (usar variable de entorno en CI/CD)
# sonar.login=${SONAR_TOKEN}
